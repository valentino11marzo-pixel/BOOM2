'use client'
function build(p={}){const out=[];const docs=(p.documents||[]).filter(Boolean);if(docs.length<3) out.push('Carica almeno 3 documenti (ID, reddito, lettera)');if(!p.period||!/\d{2}\/\d{4}\s*→\s*\d{2}\/\d{4}/.test(p.period)) out.push('Compila periodo (es. 10/2025 → 03/2026)');if(!p.budget||Number(p.budget)<=0) out.push('Inserisci budget mensile (es. 900)');return{docsCount:docs.length, checklist:out}}
export default function Dashboard(){function onSubmit(e){e.preventDefault();const f=e.currentTarget;const p={documents:[f.id.checked&&'ID',f.income.checked&&'reddito',f.letter.checked&&'lettera',f.enroll.checked&&'iscrizione'].filter(Boolean),period:f.period.value,budget:Number(f.budget.value||0)};const r=build(p);const out=document.getElementById('out');out.innerHTML='';out.insertAdjacentHTML('beforeend', `<div class=\"text-sm\">Documenti caricati: ${r.docsCount} / 3 minimo</div>`);if(r.checklist.length===0){out.insertAdjacentHTML('beforeend','<div class=\"mt-2 border border-emerald-700 bg-emerald-900/30 rounded-xl p-3\">OK: pronto per generare l\'offerta.</div>')}else{out.insertAdjacentHTML('beforeend','<ul class=\"list-disc list-inside text-sm text-white/80 mt-2\">'+r.checklist.map(i=>`<li>${i}</li>`).join('')+'</ul>')}}return(<main className='max-w-4xl mx-auto px-4 py-8'><h1 className='text-2xl font-bold'>PreCheck</h1><form onSubmit={onSubmit} className='card grid md:grid-cols-2 gap-3 mt-3'><div><div className='label'>Documenti (min 3)</div><label className='block'><input type='checkbox' name='id'/> Carta d'identità</label><label className='block'><input type='checkbox' name='income'/> Prova reddito</label><label className='block'><input type='checkbox' name='letter'/> Lettera datore</label><label className='block'><input type='checkbox' name='enroll'/> Iscrizione università</label></div><div><label className='label'>Budget mensile (€)</label><input className='input' name='budget' type='number' placeholder='900'/><label className='label mt-2'>Periodo (mm/aaaa → mm/aaaa)</label><input className='input' name='period' type='text' placeholder='10/2025 → 03/2026'/><button className='btn mt-3' type='submit'>Calcola esito</button></div></form><div id='out' className='card mt-3'></div></main>)}
